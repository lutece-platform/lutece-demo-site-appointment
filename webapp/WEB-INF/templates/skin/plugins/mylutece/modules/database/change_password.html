<div class="row currentStepContentRow">
	<div class="col-xs-12">
		<div class="container">
			<div class="col-xs-12">
				<div class="formGroupContainer">
					<h2 class="stepTitle next">#i18n{module.mylutece.database.xpage.change_password.pageTitle}</h2>
	
					<#if action_successful?has_content>
            <p>#i18n{module.mylutece.database.message.change_password.success}.</p>
            <form role="form" id="changePassword" name="changePassword" action="${action_successful}" method="post">
							<input id="button-return" type="submit" name="btnBack" value="#i18n{module.mylutece.database.xpage.account.btnBack}" class="btn btn-primary btn-sm" />
            </form>
					<#else>
            <#if error_code?has_content >
                <#assign typeClass = "class=\"error\"" />

                <#if error_code = "error_mandatory_fields">
                        <div class="alert alert-error">#i18n{module.mylutece.database.message.account.errorMandatoryFields}</div>
                        <#assign classOldPassword = typeClass />
                        <#assign classNewPassword = typeClass />
                        <#assign classConfirmation = typeClass />
                </#if>
                <#if error_code = "error_old_password">
                        <div class="alert alert-error">#i18n{module.mylutece.database.message.change_password.badOldPassword}</div>
                        <#assign classOldPassword = typeClass />
                </#if>
                <#if error_code = "error_confirmation_password">
                        <div class="alert alert-error">#i18n{module.mylutece.database.message.account.errorConfirmation}</div>
                        <#assign classNewPassword = typeClass />
                        <#assign classConfirmation = typeClass />
                </#if>
                <#if error_code = "error_same_password">
                        <div class="alert alert-error">#i18n{module.mylutece.database.message.change_password.errorSamePassword}</div>
                        <#assign classOldPassword = typeClass />
                        <#assign classNewPassword = typeClass />
                        <#assign classConfirmation = typeClass />
                </#if>
                <#if error_code = "password_minimum_length">
                        <div class="alert alert-error">${password_minimum_length!}</div>
                        <#assign classNewPassword = typeClass />
                        <#assign classConfirmation = typeClass />
                </#if>
                <#if error_code = "password_format">
                        <div class="alert alert-error">#i18n{mylutece.message.password.format}</div>
                        <#assign classNewPassword = typeClass />
                        <#assign classConfirmation = typeClass />
                </#if>
                <#if error_code = "password_already_used">
                        <div class="alert alert-error">#i18n{mylutece.message.password.passwordAlreadyUsed}</div>
                        <#assign classNewPassword = typeClass />
                        <#assign classConfirmation = typeClass />
                </#if>
                <#if error_code = "max_password_change">
                        <div class="alert alert-error">#i18n{mylutece.message.password.maxPasswordChange}</div>
                        <#assign classNewPassword = typeClass />
                        <#assign classConfirmation = typeClass />
                </#if>
            </#if>	
		
            <form role="form" id="changePassword" name="changePassword" action="jsp/site/plugins/mylutece/modules/database/DoChangePassword.jsp" method="post">
                <input type="hidden" name="plugin_name" value="${plugin_name}" />
                <fieldset>
                    <div class="form-group">
                        <label for="old_password">#i18n{module.mylutece.database.xpage.change_password.oldPassword} * : </label>
                        <input class="form-control" type="password" ${classOldPassword?if_exists} name="old_password" id="old_password" maxlength="100" size="35" tabindex="1" value="" />
                    </div>
                    <div class="form-group">
                        <label for="new_password">#i18n{module.mylutece.database.xpage.change_password.newPassword} * : </label>
                        <input class="form-control" type="password" ${classNewPassword?if_exists} name="new_password" id="new_password" maxlength="100" size="35" tabindex="2"  value="" />
                    </div>
                    <div class="form-group">
                        <label for="confirmation_password">#i18n{module.mylutece.database.xpage.change_password.confirmationPassword} * : </label>
                        <input class="form-control" type="password" ${classConfirmation?if_exists} id="confirmation_password" name="confirmation_password" maxlength="100" size="35" tabindex="3" value="" />
                    </div>
                    <button class="btn btn-primary btn-sm" id="button-subscribe" type="submit" name="changePassword"> 
                      <i class="fa fa-check">&nbsp;</i> #i18n{module.mylutece.database.xpage.change_password.btnValidate}
                    </button>
                    <button class="btn btn-default btn-sm" id="button-return" type="button" name="back" onclick="javascript:history.go(-1)">
                      <i class="fa fa-times">&nbsp;</i> #i18n{module.mylutece.database.xpage.account.btnBack} 
                    </button>
                </fieldset>
            </form>
        </#if>
				</div>
			</div>
    </div>
	</div>
</div>